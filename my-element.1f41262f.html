<script>const SingleSlim=(()=>{let e;return{getInstance:()=>(e||(e=slim.create({},!0)),e)}})();function path(e="",t){e=Array.isArray(e)?e:e.split(".");let a=t,n=0;for(;n<e.length;){if(null==a)return;a=a[e[n]],n+=1}return a}function set(e,t,a){for(var n=a,s=Array.isArray(e)?e:e.split("."),i=s.length,r=0;r<i-1;r++){var l=s[r];n[l]||(n[l]={}),n=n[l]}n[s[i-1]]=t}class MyElement extends HTMLElement{constructor(){super(),this.observe=slim.observe,this._listeners=[],this._mapper={},this.context=SingleSlim.getInstance(),this._ctxMapper={},this.computed={},this.initState()}connectedCallback(){const e=(stylesheets||[]).reduce((e,t)=>{const a=document.createElement("link");return a.href=t,a.rel="stylesheet",e.appendChild(a),e},document.createDocumentFragment());this.nonShadow?this.appendChild(this.template.content,!0):this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(e),this.shadowRoot.appendChild(document.importNode(this.template.content,!0))),this.noBind||this.template.content.querySelectorAll("slot").length||this.compile()}initState(){const e=this,t=(e.data instanceof Function?e.data:()=>e.data||{})();this.data=slim.create(t,!0,t=>{t.map(t=>{Object.keys(e._mapper).filter(e=>e.startsWith(t.currentPath)).map(t=>e._mapper[t].map(({name:a,node:n})=>{const s=path(t,e.data);null!==s&&("children"===a?n.innerText=s:(n.setAttribute(a,s),"value"===a&&(n.value=s)))}))})})}compile(e=this,t={},a=!1){e=e.shadowRoot||e;const n=this;Array.from(e.querySelectorAll("[x-for]")).map(e=>{const[a,s]=e.attributes["x-for"].value.split(":");e.removeAttribute("x-for");const i=e.cloneNode(!0);e.style.display="none",e.className="";const r=document.createDocumentFragment();let l=[];const o=o=>{l.map(e=>e.remove()),(l=(path(s,n.data)||path(s,t)||[]).map((e,n)=>{const s=i.cloneNode(!0);return s.setAttribute("key",n),this.compile(s,Object.assign({},t,{[a]:e}),!0),this.applyListeners(s,Object.assign({},t,{[a]:e})),this.activateBinds(s,Object.assign({},t,{[a]:e})),this.activateContext(s),s})).map(r.appendChild.bind(r)),e.parentNode.insertBefore(r,e.nextSibling)};n.observe(n.data,o.bind(n)),o()}),Array.from(e.querySelectorAll("[x-if]")).map(e=>{const a=e.attributes["x-if"].value;e.removeAttribute("x-if");const s=()=>{const s=path(a,n.computed)instanceof Function?path(a,n.computed):null;path(a,n.data)||path(a,n.context)||path(a,n)||s&&s.call(n,e,t)?"none"===e.style.display&&(e.style.display=e.getAttribute("display")||"block"):"none"!==e.style.display&&(e.setAttribute("display",e.style.display),e.style.display="none")};n.observe(n.data,s.bind(n)),n.observe(n.context,s.bind(n)),s()}),Array.from(e.querySelectorAll("[x-else]")).map(e=>{e.removeAttribute("x-else");const t=()=>{e.previousElementSibling.style&&"none"===e.previousElementSibling.style.display?e.style.display=e.display||"block":(e.display=e.style.display,e.style.display="none")};n.observe(n.data,t.bind(n)),n.observe(n.context,t.bind(n)),t()}),Array.from(e.querySelectorAll("*")).filter(e=>!Object.keys(e.attributes).find(e=>e.startsWith("x-"))).map(e=>{this.applyListeners(e,t),this.activateBinds(e,t),this.activateContext(e)})}activateBinds(e,t={}){const a=this;Array.from(e.attributes).filter(e=>e.name.startsWith(":")).map(n=>{e.removeAttribute(n.name);const s=path(n.value,a.computed)instanceof Function?path(n.value,a.computed):null,i=n.name.slice(1),r=path(n.value,t)||(s?s.call(a,e,t):path(n.value,this.data))||"";"children"===i?e.innerText=r:e.setAttribute(i,r),"value"===i&&(e.value=r),this._mapper.hasOwnProperty(n.value)?this._mapper[n.value].push({name:s?"":i,node:e}):this._mapper[n.value]=[{name:s?"":i,node:e}]})}diactivateState(){slim.remove(this.data)}activateContext(e){const t=this;Array.from(e.attributes).filter(e=>e.name.startsWith("~")).map(a=>{const n=a.name.slice(1);e.removeAttribute(a.name),t._ctxMapper.hasOwnProperty(a.value)?t._ctxMapper[a.value].push({name:n,node:e}):t._ctxMapper[a.value]=[{name:n,node:e}]}),slim.observe(SingleSlim.getInstance(),e=>{e.map(e=>{Object.keys(t._ctxMapper).filter(t=>t.startsWith(e.currentPath)).map(e=>t._ctxMapper[e].map(({name:a,node:n})=>{const s=path(e,t.context);"children"===a?n.innerText=s:(n.setAttribute(a,s),"value"===a&&(n.value=s))}))})})}disconnectedCallback(){this.clearListeners(),this.diactivateState()}applyListeners(e,t={}){const a=this;Array.from(e.attributes).filter(e=>e.name.startsWith("@")).map(n=>{if(e.removeAttribute(n.name),a[n.value]instanceof Function){const s=s=>a[n.value].apply(a,[s,e,t]);e.addEventListener(n.name.slice(1),s),a._listeners.push({el:e,event:n.name.slice(1),handler:s})}})}clearListeners(){this._listeners.map(({el:e,event:t,handler:a})=>e.removeEventListener(t,a)),this._listeners.length=0}}window.MyElement=MyElement,window.exportTag=((e="",t=class extends MyElement{},{nonShadow:a=!1,noBind:n=!1}={})=>(t.template=t.prototype.template=document.currentScript.parentElement.querySelector("template").cloneNode(!0),t.nonShadow=t.prototype.nonShadow=a,t.noBind=t.prototype.noBind=n,document.currentScript.parentElement.querySelector("template").remove(),customElements.define(e,t)));</script> 